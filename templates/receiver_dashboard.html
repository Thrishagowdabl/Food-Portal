<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Receiver Dashboard</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        .container {
            flex-grow: 1;
        }
        .donation-item {
            border: 1px solid #ccc;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            background-color: #f9f9f9;
        }
        .donation-item strong {
            color: #007bff;
        }
        .footer {
            background-color: #343a40 !important; /* Ensure dark background */
            color: white;
            padding: 20px 0;
            text-align: center;
            margin-top: 20px; /* Add some space above the footer */
        }
        .footer a {
            color: #fff;
            text-decoration: underline;
        }
        .footer h5 {
            margin-bottom: 10px;
            color: #f8f9fa;
        }
        .footer p {
            margin-bottom: 5px;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <a class="navbar-brand" href="#">FoodShare</a>
    <div class="collapse navbar-collapse">
        <ul class="navbar-nav ml-auto">
            <li class="nav-item"><a class="nav-link" href="{% url 'home' %}">Home</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'receiver_dashboard' %}">Receiver Dashboard</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'logout' %}">Logout</a></li>
        </ul>
    </div>
</nav>

<div class="container mt-5">
    <h2 class="mb-4 text-center">Available Donations</h2>

    <div class="text-center mb-4">
        <form method="post">
            {% csrf_token %}
            <button type="submit" name="check_availability" class="btn btn-primary">Check for New Donations</button>
        </form>
    </div>

    {% if donations %}
        {% for donation in donations %}
            <div class="donation-item">
                <strong>{{ donation.food_type }}</strong><br>
                Quantity: {{ donation.quantity }}<br>
                Pickup Location: {{ donation.pickup_location }}<br>
                Pickup Time: {{ donation.pickup_time }}<br>
                Expiry Date: {{ donation.expiry_date }}<br><br>

                <strong>Donor Information:</strong><br>
                Name: {{ donation.donor.username }}<br>
                Email: {{ donation.donor.email }}<br>
                {% if donation.donor_profile %}
                    Phone: {{ donation.donor_profile.mobile_number }}<br>
                {% else %}
                    Phone: Not available<br>
                {% endif %}
            </div>
        {% empty %}
            <p class="text-center">No donations available right now.</p>
        {% endfor %}
    {% endif %}
</div>

<footer class="footer mt-auto py-3 text-center">
    <div class="container">
        <h5>About Food Donation Portal</h5>
        <p class="mb-2">
            This platform connects food donors with individuals or organizations in need. Donors can easily post available food items, and receivers can request what they need. Our goal is to reduce food waste and ensure surplus food reaches those who need it the most.
        </p>
        <p class="mb-2">
            For any queries, contact us at: <a href="mailto:thrishagowdabl2005@gmail.com">thrishagowdabl2005@gmail.com</a>
        </p>
        <span>&copy; 2025 Food Donation Portal. All rights reserved.</span>
    </div>
</footer>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

</body>
</html>